"use strict";(self.webpackChunkreact_typescript=self.webpackChunkreact_typescript||[]).push([[538,555],{7712:function(e,t,a){a.d(t,{Dm:function(){return c},gp:function(){return l},FZ:function(){return r},jN:function(){return o}});var n=a(4569),s=a.n(n)().create({baseURL:"/appo"}),i=s;function r(e){return i.request({method:"POST",url:"/reactList",data:e})}function l(e){return i.request({method:"GET",url:"/reactGetList",params:e})}function c(e){return i.request({method:"POST",url:"/getexamList",data:e})}function o(e){return i.request({method:"POST",url:"/submitExamLists",data:e})}s.interceptors.response.use((function(e){return e.data}))},7309:function(e,t,a){a.d(t,{Z:function(){return o}});var n=a(5671),s=a(3144),i=a(136),r=a(8557),l=a(2791),c=a(184),o=function(e){(0,i.Z)(a,e);var t=(0,r.Z)(a);function a(){return(0,n.Z)(this,a),t.apply(this,arguments)}return(0,s.Z)(a,[{key:"render",value:function(){return(0,c.jsx)("div",{className:"alert",children:this.props.children})}}]),a}(l.Component)},3555:function(e,t,a){a.r(t),a.d(t,{default:function(){return f}});var n=a(5671),s=a(3144),i=a(136),r=a(8557),l=a(2791),c=a(7063),o=a(1358),d=a(7712),u=a(7309),m=a(9271),h=a(184),x=function(e){(0,i.Z)(a,e);var t=(0,r.Z)(a);function a(){var e;(0,n.Z)(this,a);for(var s=arguments.length,i=new Array(s),r=0;r<s;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).tabData=function(e){var t=[];localStorage.getItem("student");return e.forEach((function(e){var a={id:e.id,type:e.type,answer:null};t.push(a)})),t},e.state={dan:"",arr:e.tabData(e.props.allDatas),InterVal:null,ending:""},e.Myrefs=void 0,e.getLists=function(e){var t=Object.keys(e).filter((function(t){return"\u5355\u9009\u9898"===e.type||"\u591a\u9009\u9898"===e.type?-1!==t.indexOf("option"):"\u5224\u65ad\u9898"===e.type?-1!==t.indexOf("estimate"):"\u586b\u7a7a\u9898"===e.type?-1!==t.indexOf("answer"):-1!==t.indexOf("short")})),a=JSON.parse(JSON.stringify(t));return t.forEach((function(t){null===e[t]&&a.splice(a.indexOf(t),1)})),a},e.getEndTime=function(){var t=e.props,a=t.startTime,n=t.examId,s=e.state,i=(s.ending,s.arr),r=(new Date).getTime()-a,l=(Math.floor(r%864e5/36e5)>=10?Math.floor(r%864e5/36e5):Math.floor(r%864e5/36e5)>=0?"0"+Math.floor(r%864e5/36e5):"00")+":"+(Math.floor(r%36e5/6e4)>=10?Math.floor(r%36e5/6e4):Math.floor(r%36e5/6e4)>=0?"0"+Math.floor(r%36e5/6e4):"00")+":"+(Math.ceil(r%6e4/1e3)>=10?Math.ceil(r%6e4/1e3):Math.ceil(r%6e4/1e3)>=0?"0"+Math.ceil(r%6e4/1e3):"00"),c=localStorage.getItem("student"),o=JSON.parse(c);(0,d.jN)({id:o[0].id,ending:l,examList:i,examId:n}).then((function(t){console.log(t.code),"01"===t.code&&(console.log(e.props),e.props.history.push("/paper"))}))},e.submitExamList=function(){var t=e.state,a=t.ending,n=t.arr,s=localStorage.getItem("student"),i=JSON.parse(s);(0,d.jN)({id:i[0].id,ending:a,examList:n}).then((function(e){}))},e}return(0,s.Z)(a,[{key:"render",value:function(){var e=this,t=this.state,a=(t.dan,t.arr),n=(t.InterVal,this.props),s=n.allDatas,i=(n.startTime,n.count);return(0,h.jsxs)("div",{className:"box",children:[(0,h.jsxs)("div",{className:"boxList",children:[s.map((function(t,n){return(0,h.jsxs)("div",{className:"littleBox",children:[(0,h.jsxs)("h2",{children:[n+1,".",t.topic_nav,"(",t.type,")"]}),t.topic_img?(0,h.jsx)("img",{src:"http://192.168.5.104:7777/"+t.topic_img,alt:"",className:"img"}):"",(0,h.jsx)("div",{children:e.getLists(t).map((function(e,n){return-1===e.indexOf("img")?(0,h.jsxs)("div",{className:"answer",children:["\u5355\u9009\u9898"===t.type?(0,h.jsxs)("div",{children:[(0,h.jsx)("input",{type:"radio",className:"fill","data-key":e+","+t.id,name:t.id,value:e,onChange:function(n){var s=a.findIndex((function(e){return e.id===t.id}));a[s].answer=e,console.log(a)}}),t[e]]}):"","\u591a\u9009\u9898"===t.type?(0,h.jsxs)("div",{className:"answers",children:[(0,h.jsx)("input",{type:"checkbox",className:"fill","data-key":e+","+t.id,value:e,onChange:function(n){var s=a.findIndex((function(e){return e.id===t.id}));if(null===a[s].answer)a[s].answer=e;else if(-1===a[s].answer.indexOf(e)){var i=a[s].answer.split(",");i.push(e),a[s].answer=i.join(",")}else{var r=a[s].answer.split(",");r.splice(r.indexOf(e),1),a[s].answer=r.join(",")}}}),t[e]]}):"","\u5224\u65ad\u9898"===t.type?(0,h.jsxs)("div",{children:[(0,h.jsx)("input",{type:"radio",className:"fill","data-key":e+","+t.id,name:"idx"+t.id,value:e,onChange:function(n){var s=a.findIndex((function(e){return e.id===t.id}));a[s].answer=e,console.log(a[s])}}),t[e]]}):"","\u7b80\u7b54\u9898"===t.type?(0,h.jsx)("div",{contentEditable:"true",suppressContentEditableWarning:!0,className:"short","data-key":e+","+t.id,onInput:function(e){var n=a.findIndex((function(e){return e.id===t.id}));a[n].answer=e.target.innerText}}):"","\u586b\u7a7a\u9898"===t.type?(0,h.jsx)("div",{contentEditable:"true",className:"fill","data-key":e+","+t.id,suppressContentEditableWarning:!0,onInput:function(e){var n=a.findIndex((function(e){return e.id===t.id}));a[n].answer=e.target.innerText},children:t[e]}):""]},n):(0,h.jsx)("img",{src:"http://192.168.5.104:7777/"+t[e],className:"images"})}))})]},n)})),i>=3?(0,h.jsx)(u.Z,{children:(0,h.jsx)("div",{className:"box",children:(0,h.jsxs)("div",{className:"littleBox",children:[(0,h.jsx)(c.ZP,{status:"warning",className:"result"}),(0,h.jsx)("h3",{children:"\u60a8\u5df2\u5207\u5c4f\u4e09\u6b21\uff0c\u8bf7\u4ea4\u5377\uff01"}),(0,h.jsx)(o.Z,{type:"primary",onClick:function(){document.querySelectorAll(".fill");e.getEndTime()},children:"\u4ea4\u5377"})]})})}):""]}),(0,h.jsx)(o.Z,{type:"primary",className:"examination",onClick:function(){document.querySelectorAll(".fill");e.getEndTime()},children:"\u4ea4\u5377"})]})}}]),a}(l.Component),f=(0,m.EN)(x)},7538:function(e,t,a){a.r(t),a.d(t,{default:function(){return b}});var n=a(5671),s=a(3144),i=a(136),r=a(8557),l=a(2791),c=a(9529),o=a(6102),d=a(732),u=a(6883),m=a(135),h=a(7501),x=a(7063),f=a(1358),p=a(807),j=a(3555),v=a(7309),g=a(7712),N={get:function(e){return{type:"getTime",payload:e}}},w=a(364),y=a(184),T=function(e){(0,i.Z)(a,e);var t=(0,r.Z)(a);function a(){var e;(0,n.Z)(this,a);for(var s=arguments.length,i=new Array(s),r=0;r<s;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).state={topic:!1,subjectValue:[],allData:[],nowSecned:"00:00:00",nameValue:"",phoneValue:"",Alerts:!1,count:0,alertOne:!1,titleData:[{exam_nav:"",name_flag:0,iphone_flag:0,grade_flag:0,sex_flag:0}],sexValue:"",examLists:[],createTime:"",endTime:"",timeAlert:!1,startTime:"",examId:"",zeroTwo:!1,zero:""},e.startTest=function(){var t=e.state;t.topic,t.subjectValue,t.Alerts;(0,g.FZ)({list:e.state.examLists}).then((function(t){e.state.allData;e.setState({allData:t.data,topic:!0})}))},e.getExamLists=function(){var t=e.state,a=t.nameValue,n=t.phoneValue,s=t.subjectValue,i=t.examId;t.zero,t.zeroTwo;(0,g.Dm)({nameValue:a,phoneValue:n,subjectValue:s,examId:i}).then((function(t){console.log(t),localStorage.setItem("student",JSON.stringify(t.data)),"01"===t.code?(e.setState({Alerts:!1}),e.end(),e.getNowTime(),e.startTest(),e.launchFullscreen(document.documentElement),window.addEventListener("focus",e.enter),window.addEventListener("blur",e.leave)):("02"===t.code||"03"===t.code||"04"===t.code||"05"===t.code)&&e.setState({zero:t.msg,zeroTwo:!0})}))},e.handleChange=function(t){e.state.subjectValue;e.setState({subjectValue:t})},e.endTime=function(t,a){e.state.nowSecned;var n=new Date(t).getTime(),s=new Date(a).getTime(),i=(new Date).getTime(),r=s-i;if(n<i<s){var l=(Math.floor(r/1e3/60/60%24)>=10?Math.floor(r/1e3/60/60%24):Math.floor(r/1e3/60/60%24)>=0?"0"+Math.floor(r/1e3/60/60%24):"00")+":"+(Math.floor(r%36e5/6e4)>=10?Math.floor(r%36e5/6e4):Math.floor(r%36e5/6e4)>=0?"0"+Math.floor(r%36e5/6e4):"00")+":"+(Math.ceil(r%6e4/1e3)>=10?Math.ceil(r%6e4/1e3):Math.ceil(r%6e4/1e3)>=0?"0"+Math.ceil(r%6e4/1e3):"00");e.setState({nowSecned:l})}else{e.state.timeAlert;e.setState({timeAlert:!0})}},e.end=function(){setInterval((function(){var t=e.state,a=t.createTime,n=t.endTime;e.endTime(a,n)}),1e3)},e.myTimer=function(){(new Date).toLocaleTimeString()},e.leave=function(){var t=e.state,a=t.count;t.alertOne;e.setState({count:a+1,alertOne:!0})},e.enter=function(){setInterval((function(){e.myTimer()}),1e3)},e.launchFullscreen=function(e){e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.msRequestFullscreen&&e.msRequestFullscreen()},e.getCaption=function(e,t){var a=e.lastIndexOf(t);return e=e.substring(a+1,e.length)},e.getNowTime=function(){e.state.startTime;var t=(new Date).getTime();e.setState({startTime:t})},e}return(0,s.Z)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.topic,n=t.alertOne,s=t.timeAlert,i=t.zero,r=t.zeroTwo,l=t.startTime,g=t.examId,N=(t.examLists,t.createTime,t.endTime,t.sexValue),w=t.allData,T=t.titleData,b=t.nowSecned,Z=t.nameValue,_=t.phoneValue,S=t.subjectValue,k=t.Alerts,I=t.count;u.Z.Option;return(0,y.jsxs)("div",{className:"hide_cover",children:[(0,y.jsxs)("div",{id:"timeCounter",children:[(0,y.jsx)("i",{className:"icon_time"}),(0,y.jsxs)("div",{id:"submitTimer",children:["\u603b\u8ba1\u65f6 ",(0,y.jsx)("span",{children:b})]})]}),(0,y.jsx)("div",{className:"wjContent clear",id:"survey_page",children:(0,y.jsxs)("div",{className:"content_box content_top",children:[(0,y.jsxs)("div",{className:"content",id:"begin_content",children:[(0,y.jsx)("div",{className:"wjtitle mtop project_title",children:(0,y.jsx)("h1",{children:(0,y.jsx)("p",{children:"web\u524d\u7aef\u7b14\u8bd5\u9898"})})}),(0,y.jsx)("div",{className:"wjintro mtop desc_begin",children:T[0].exam_nav}),(0,y.jsx)("div",{className:"wjhr mtop"})]}),(0,y.jsxs)("div",{id:"question_box",children:[1===T[0].name_flag?(0,y.jsxs)("div",{className:"wjques maxtop question",children:[(0,y.jsx)("div",{className:"title",children:(0,y.jsxs)("div",{className:"answer_title",children:[(0,y.jsx)("span",{children:"\u59d3\u540d:"}),(0,y.jsx)("span",{className:"asterisk",children:"*"})]})}),(0,y.jsx)("div",{className:"matrix",children:(0,y.jsx)(m.Z,{placeholder:"\u8bf7\u8f93\u5165\u60a8\u7684\u59d3\u540d",prefix:(0,y.jsx)(c.Z,{className:"site-form-item-icon"}),onChange:function(t){e.setState({nameValue:t.target.value})},value:Z,disabled:a})})]}):"",1===T[0].iphone_flag?(0,y.jsxs)("div",{className:"wjques maxtop question",children:[(0,y.jsx)("div",{className:"title",children:(0,y.jsxs)("div",{className:"answer_title",children:[(0,y.jsx)("span",{children:"\u7535\u8bdd\u53f7\u7801:"}),(0,y.jsx)("span",{className:"asterisk",children:"*"})]})}),(0,y.jsx)("div",{className:"matrix",children:(0,y.jsx)(m.Z,{placeholder:"\u8bf7\u8f93\u5165\u60a8\u7684\u624b\u673a\u53f7",prefix:(0,y.jsx)(o.Z,{className:"site-form-item-icon"}),disabled:a,onBlur:function(t){/^1[3456789][0-9]{9}$/.test(t.target.value)?e.setState({phoneValue:t.target.value}):console.log("\u4e0d\u7b26\u5408")},maxLength:11})})]}):"",1===T[0].grade_flag?(0,y.jsxs)("div",{className:"wjques maxtop question",children:[(0,y.jsx)("div",{className:"title",children:(0,y.jsxs)("div",{className:"answer_title",children:[(0,y.jsx)("span",{children:"\u8bf7\u586b\u5199\u4f60\u7684\u73ed\u7ea7:"}),(0,y.jsx)("span",{className:"asterisk",children:"*"})]})}),(0,y.jsx)("div",{className:"matrix",children:(0,y.jsx)(m.Z,{placeholder:"\u8bf7\u8f93\u5165\u60a8\u7684\u73ed\u7ea7",prefix:(0,y.jsx)(c.Z,{}),onChange:function(t){e.setState({subjectValue:t.target.value})},disabled:a})})]}):"",1===T[0].sex_flag?(0,y.jsxs)("div",{className:"wjques maxtop question",children:[(0,y.jsx)("div",{className:"title",children:(0,y.jsxs)("div",{className:"answer_title",children:[(0,y.jsx)("span",{children:"\u8bf7\u9009\u62e9\u4f60\u7684\u6027\u522b:"}),(0,y.jsx)("span",{className:"asterisk",children:"*"})]})}),(0,y.jsx)("div",{className:"matrix",children:(0,y.jsxs)(h.ZP.Group,{onChange:function(t){e.setState({sexValue:t.target.value})},disabled:a,children:[(0,y.jsx)(h.ZP,{value:"\u7537",children:"\u7537"}),(0,y.jsx)(h.ZP,{value:"\u5973",children:"\u5973"})]})})]}):"",s?(0,y.jsx)(v.Z,{children:(0,y.jsx)("div",{className:"box",children:(0,y.jsxs)("div",{className:"littleBox",children:[(0,y.jsx)(x.ZP,{status:"warning",className:"result"}),(0,y.jsx)("h3",{children:"\u60a8\u7684\u8003\u8bd5\u4e0d\u5728\u65f6\u95f4\u6bb5\u5185\uff01"}),(0,y.jsx)(f.Z,{type:"primary",onClick:function(){e.setState({timeAlert:!1})},children:"\u5173\u95ed"})]})})}):"",r?(0,y.jsx)(v.Z,{children:(0,y.jsx)("div",{className:"box",children:(0,y.jsxs)("div",{className:"littleBox",children:[(0,y.jsx)(x.ZP,{status:"warning",className:"result"}),(0,y.jsx)("h3",{children:i}),(0,y.jsx)(f.Z,{type:"primary",onClick:function(){e.setState({zeroTwo:!1})},children:"\u5173\u95ed"})]})})}):""]}),(0,y.jsx)(f.Z,{type:"primary",className:a?"btns":"btn",onClick:function(){0!==T[0].grade_flag&&0===S.length||0!==T[0].name_flag&&""===Z||0!==T[0].iphone_flag&&""===_||0!==T[0].sex_flag&&""===N?1===T[0].grade_flag&&0===S.length?alert("\u73ed\u7ea7\u4e0d\u80fd\u4e3a\u7a7a"):1===T[0].name_flag&&""===Z?alert("\u540d\u5b57\u4e0d\u80fd\u4e3a\u7a7a"):1===T[0].iphone_flag&&""===_?alert("\u7535\u8bdd\u4e0d\u80fd\u4e3a\u7a7a"):1===T[0].sex_flag&&""===N&&alert("\u6027\u522b\u4e0d\u80fd\u4e3a\u7a7a"):e.getExamLists()},children:"\u5f00\u59cb\u8003\u8bd5"}),a?(0,y.jsx)(j.default,{count:I,allDatas:w,startTime:l,examId:g}):""]})}),k?(0,y.jsxs)("div",{children:[(0,y.jsx)(p.Z,{message:"Error",type:"error",showIcon:!0,className:"alert"}),(0,y.jsx)(d.Z,{className:"alerts",onClick:function(){e.setState({Alerts:!1})}})]}):"",n&&I<3?(0,y.jsx)(v.Z,{children:(0,y.jsx)("div",{className:"box",children:(0,y.jsxs)("div",{className:"littleBox",children:[(0,y.jsx)(x.ZP,{status:"warning",className:"result"}),(0,y.jsxs)("h3",{children:["\u60a8\u5df2\u5207\u5c4f",I,"\u6b21\uff0c\u5207\u5c4f\u4e09\u6b21\u5c31\u8981\u4ea4\u5377\u4e86\uff01"]}),(0,y.jsx)(f.Z,{type:"primary",onClick:function(){e.setState({alertOne:!1})},children:"\u5173\u95ed"})]})})}):""]})}},{key:"componentDidMount",value:function(){var e=this;console.log(this.refs),console.log(this);var t=window.location.href;console.log(t);var a=this.getCaption(t,"?").slice(10);(0,g.gp)({id:a}).then((function(t){var a=e.state;a.titleData,a.examLists,a.createTime,a.endTime,a.examId;console.log(t),e.setState({titleData:t.data,examLists:t.data[0].exam_questions,createTime:t.data[0].create_time,endTime:t.data[0].end_time,examId:t.data[0].id})}))}}]),a}(l.Component),b=(0,w.$j)((function(e){return e}),N)(T)}}]);
//# sourceMappingURL=538.14a5a0b2.chunk.js.map